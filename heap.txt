The Windows heap manager can be broken down into two components: the Front End Allocator and the Back End Allocator.

Front End Allocator
1.  Look aside list (LAL) front end allocator
The LAL is a table of 128 singly-linked lists. Each list contains free blocks of a specific size, starting at 16 bytes. The size of each block includes 8 bytes of metadata used to manage the block. The formula for determining the index into the table given the size is index = ceil((size + 8)/8) – 1 where the “+8” accounts for the metadata. Note that index is always positive.


2.  Low fragmentation (LF) front end allocator
Starting with Windows Vista, the LAL front end allocator isn’t present anymore and the LFH front end allocator is used instead. The LFH front end allocator is very complex, but the main idea is that it tries to reduce the heap fragmentation by allocating the smallest block of memory that is large enough to contain data of the requested size.











